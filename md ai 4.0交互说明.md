# 墨刀AI 4.0 改版交互说明

> **文档信息**
> 📅 **更新日期**：2026-02-02
> 📝 **文档状态**：已发布

<br>

### 1. 概述

本次改版主要针对墨刀AI首页输入框下方区域进行重构，引入结构化的 **"一级Tab + 二级功能卡片"** 导航体系，以提升用户探索和使用AI能力的效率。

<br>

### 2. 交互区域定义

#### 2.1 一级导航 (L1 Tabs)

位于输入框正下方，采用横向弹性布局（PC端），根据屏幕宽度自适应。

- **交互逻辑**
  - 点击任意Tab，立即切换下方二级内容区域。
  - **默认选中**：“推荐” (Recommend)。
- **状态样式**
  - **默认**：半透明背景，灰色图标/文字。
  - **Hover**：白色背景，轻微上浮，显示阴影。
  - **选中**：白色背景，高亮边框，图标变为品牌色背景+白字，卡片上浮。

#### 2.2 二级功能卡片 (L2 Cards)

根据一级Tab的选择动态展示对应的功能网格，根据屏幕宽度自适应

- **卡片结构**：左侧图标 + 右侧标题/描述 + (可选) 右上角操作指引图标。
- **交互状态**
  - **Hover**：卡片上浮，背景变为渐变色，出现操作箭头（普通箭头或新窗口箭头）。
  - **点击**：触发下述三种交互模式之一。

<br>

### 3. 核心交互模式详解

根据功能类型，二级卡片点击后分为三种交互逻辑：

#### 模式 A：直接跳转 (Direct Link)

点击卡片后，不经过输入框，直接在新标签页打开对应工具或页面。

- **视觉标识**：Hover时右上角显示 "新窗口打开" 图标 `fa-arrow-up-right-from-square`。
- **适用场景**
  - HTML转原型 (新窗口打开，复用现有功能)
  - 思维导图 (新窗口打开，墨刀白板编辑区-打开AI右侧栏)
  - AI美化PPT (新窗口打开，墨刀工作台-首页-AI美化PPT-打开本地文件夹弹框)
  - 思维导图、流程图、用户旅程图和项目进度图等图表类功能

#### 模式 B：能力挂载 (Capability Selection)

点击卡片后，该能力作为一个“标签(Tag)”挂载到输入框内部左侧，聚焦输入框引导用户输入。

- **交互流程**
  1. 点击卡片。
  2. 输入框内左上角出现对应标签（如“AI生成原型”）。
  3. 光标自动聚焦在标签后方。
  4. **特殊情况**：如果是“图片转原型”，在挂载标签的同时，自动触发系统文件选择器 (`input type="file"`)。
- **取消挂载**
  - **方式1**：点击输入框内标签右侧的 "x" 可移除当前能力。
  - **方式2**：再次单击输入框下方任意一级Tab（包括当前选中的Tab），会自动清除当前挂载的标签，并重新展开二级卡片区域。
- **界面联动**：标签挂载成功后，下方的二级卡片区域会自动收起（Collapse），减少干扰。

#### 模式 C：生成式跳转 (Generation Flow)

这是一种特殊的组合交互，用户先选择能力，输入内容后，经过AI处理再打开新页面。

- **典型案例**：“AI生成PPT” (位于PPT分类下)
- **交互流程**
  1. **挂载**：用户点击“AI生成PPT”，标签挂载到输入框。
  2. **输入**：用户输入规划主题（如“2026年Q1产品规划”）。
  3. **发送**：点击发送按钮。
  4. **加载**：
     - 界面显示全屏毛玻璃加载层 (Overlay)。
     - 展示动态文案：“正在解析内容...”。
     - 展示高级动效（光环旋转 + 脉冲）。
  5. **结果**：等待处理完毕（约4.5秒）后，自动在新标签页打开生成结果 (`ppt-outline.png`)。

<br>

### 4. 详细功能映射表


| 一级分类     | 二级功能          | 交互模式   | 备注                                                  |
| :------------- | :------------------ | :----------- | :------------------------------------------------------ |
| **推荐**     | AI生成原型        | 模式 B     |                                                       |
|              | 图片转原型        | 模式 B     | 伴随文件上传                                          |
|              | 需求文档PRD       | 模式 B     |                                                       |
|              | HTML转原型        | **模式 A** | 新窗口打开（同现有功能）                              |
|              | 竞品分析          | 模式 B     |                                                       |
|              | 产品方案评审      | 模式 B     |                                                       |
| **原型设计** | AI生成原型        | 模式 B     |                                                       |
|              | 图片转原型        | 模式 B     | 伴随打开本地文件夹窗口                                |
|              | HTML转原型        | **模式 A** | 新窗口打开（同现有功能）                              |
|              | 交互方案生成      | 模式 B     |                                                       |
| **产品策划** | 需求文档PRD       | 模式 B     |                                                       |
|              | 竞品分析          | 模式 B     |                                                       |
|              | 用户调研          | 模式 B     |                                                       |
|              | 产品方案评审      | 模式 B     |                                                       |
|              | 产品规划          | 模式 B     |                                                       |
| **PPT**      | AI生成PPT         | **模式 C** | **特殊流程** (输入->加载->跳转)                       |
|              | AI美化PPT         | **模式 A** | 新窗口打开 (墨刀工作台-首页-AI美化ppt-打开文件夹弹框) |
| **UI设计**   | AI生成界面设计    | 模式 B     | 卡片显示「敬请期待」标签，当前暂不支持                 |
|              | UI规范评审        | 模式 B     |                                                       |
| **营销推广** | SEO文章生成       | 模式 B     |                                                       |
| **研发测试** | 测试用例生成      | 模式 B     |                                                       |
|              | 技术方案生成      | 模式 B     |                                                       |
|              | 技术方案评估      | 模式 B     |                                                       |
| **图表**     | 思维导图          | **模式 A** | 新窗口打开（墨刀白板编辑区-AI侧边栏打开）             |
|              | 流程图            | **模式 A** | 新窗口打开（墨刀白板编辑区-AI侧边栏打开）             |
|              | 用户旅程图        | **模式 A** | 新窗口打开（墨刀白板编辑区-AI侧边栏打开）             |
|              | 项目进度图        | **模式 A** | 新窗口打开（墨刀白板编辑区-AI侧边栏打开）             |
|              | 生成AntV-X6流程图 | 模式 B     |                                                       |

<br>

### 5. 动效与反馈说明

- **输入框响应**：当标签挂载时，输入文本会有缩进 (Text Indent) 避让标签。
- **折叠动画**：当标签挂载（选中二级功能）时，下方的二级卡片区域会自动收起，释放空间给输入和对话区域。
- **Loading态**：输入框输入内容后，单击发送，发送的动效和逻辑与线上现有逻辑保持一致。
  > *注：若是模式 C (AI生成PPT)，在此基础上还会额外叠加全屏沉浸式 Loading。*
  >

<br>

### 6. 其他场景补充

- **富媒体生成支持**
  部分场景（如AI生成配图、AI生成图标等）生成的内容包含图片格式。系统支持在对话流中直接插入并展示生成的图片内容，复用现有功能。
- **文档生成限制**
  对于生成文档类内容（如SEO文章生成、需求文档PRD等），目前生成的文档 **不支持插入图片**。本期版本暂不支持在生成的文档结构中包含图片元素。
- **旧能力与新场景对应关系**
  原型设计 > ai生成原型
  方案撰写 > 需求文档PRD
  产品调研 > 竞品分析
  方案评审 > 产品方案评审
- **投放页跳转**
  用户在AI投放页中选择对应的旧能力并输入需求后，跳转墨刀AI后，按照新旧能力对应关系，默认选中对应的新场景，并默认带入相应的用户需求
- **附件上传限制**
  当选中“AI生成PPT”能力时，输入框右下角的附件上传按钮置灰禁用。

  - **交互反馈**：鼠标 Hover 禁用按钮时，显示提示文案：“AI生成PPT暂不支持上传附件”。
  - **场景切换**：若用户在其他场景下上传了附件，切换到AI生成PPT时，相关附件置灰色，不可删除。hover到附件上时显示提示文案：“AI生成PPT暂不支持上传附件”。

- **思考模式限制**
  当选中“AI生成PPT”能力时，输入框左下角的“极速模式/深度思考”切换按钮置灰禁用，不可点击。

<br>

### 7. 私有化部署

- **场景屏蔽**
  对于私有化环境不支持的AI场景（由后端接口控制），前端需隐藏对应的二级功能卡片；当一级Tab下的二级功能为空时，不显示对应的一级Tab。

### 8. 移动端适配

- **移动端的方案同线上，不改**

<br>

### 9. 输入框引导词（Placeholder）说明

当用户选择二级场景后，输入框的 placeholder（置灰引导文字）会自动更新为对应场景的引导词，帮助用户了解如何使用该功能。

#### 9.1 引导词更新规则

- **模式 B（能力挂载）**：选择场景后，输入框 placeholder 自动更新为该场景的引导词
- **模式 A（直接跳转）**：选择场景后，placeholder 不更新（因为这些场景会直接跳转到新页面）
- **清除标签**：点击标签的关闭按钮或切换一级分类时，placeholder 恢复为默认引导文字："描述您的创意，或者选择下方专业场景开始..."

#### 9.2 各场景引导词内容

##### 推荐分类

| 场景 | 引导词内容 |
| :--- | :--- |
| AI生成原型 | 请描述您想要创建的原型功能和应用场景，例如：设计一个在线教育平台的课程详情页... |
| 图片转原型 | 请上传设计图或截图，我将帮您转换为可编辑的原型... |
| 需求文档PRD | 请描述产品需求，我将为您生成完整的PRD文档... |
| HTML转原型 | 请输入网页地址，我将还原为高保真原型...（模式A，不更新placeholder） |
| 竞品分析 | 请提供竞品名称或行业类别（如在线教育、SaaS工具等），我将进行多维度分析... |
| 产品方案评审 | 请上传或描述您的产品方案，我将提供专业评审建议... |

##### 原型设计分类

| 场景 | 引导词内容 |
| :--- | :--- |
| AI生成原型 | 请描述您想要创建的原型功能和应用场景，例如：设计一个在线教育平台的课程详情页... |
| 图片转原型 | 请上传设计图或截图，我将帮您转换为可编辑的原型... |
| HTML转原型 | 请输入网页地址，我将还原为高保真原型...（模式A，不更新placeholder） |
| 交互方案生成 | 请描述页面流程和交互需求，我将生成详细的交互说明文档... |

##### 产品策划分类

| 场景 | 引导词内容 |
| :--- | :--- |
| 需求文档PRD | 请描述产品需求，我将为您生成完整的PRD文档... |
| 竞品分析 | 请提供竞品名称或行业类别（如在线教育、SaaS工具等），我将进行多维度分析... |
| 用户调研 | 请描述调研目标，我将为您生成调研问卷和用户画像分析... |
| 产品方案评审 | 请上传或描述您的产品方案，我将提供专业评审建议... |
| 产品规划 | 请描述产品目标和当前阶段，我将为您制定版本迭代计划... |

##### PPT分类

| 场景 | 引导词内容 |
| :--- | :--- |
| AI生成PPT | 请描述PPT主题和内容要点，我将为您快速生成完整的演示文稿... |
| AI美化PPT | 请上传您的PPT文件，我将一键优化排版配色...（模式A，不更新placeholder） |

##### UI设计分类

| 场景 | 引导词内容 |
| :--- | :--- |
| UI规范评审 | 请上传设计稿或描述UI规范要求，我将检查设计一致性... |

##### 营销推广分类

| 场景 | 引导词内容 |
| :--- | :--- |
| SEO文章生成 | 请提供文章主题和关键词，我将为您生成利于搜索引擎收录的推广文章... |

##### 研发测试分类

| 场景 | 引导词内容 |
| :--- | :--- |
| 测试用例生成 | 请描述功能需求或上传需求文档，我将自动解析并生成完整的测试用例... |
| 技术方案生成 | 请描述系统需求和技术要求，我将为您生成技术方案... |
| 技术方案评估 | 请提供技术方案文档，我将分析方案的可行性... |

##### 图表分类

| 场景 | 引导词内容 |
| :--- | :--- |
| 思维导图 | 请描述核心主题和分支内容，我将为您生成思维导图...（模式A，不更新placeholder） |
| 流程图 | 请描述业务流程和逻辑关系，我将自动绘制标准流程图...（模式A，不更新placeholder） |
| 用户旅程图 | 请描述用户使用场景和关键触点，我将为您生成用户旅程图...（模式A，不更新placeholder） |
| 项目进度图 | 请提供项目任务和时间节点，我将为您生成甘特图...（模式A，不更新placeholder） |
| 生成AntV-X6流程图 | 请描述流程图的结构和节点关系，我将生成AntV-X6流程图代码... |

#### 9.3 技术实现

- 每个场景配置项中包含 `placeholderText` 字段
- 选择场景时，通过 `handleCardClick` 函数更新 `inputPlaceholder` 响应式变量
- 清除标签时，通过 `watch(selectedSubCategory)` 恢复默认 placeholder
